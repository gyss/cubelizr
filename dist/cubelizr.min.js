/*
	Cubelizr JS v0.1.0 (2015-06-26)
	(c) 2015 Jose Lladro
	License: MIT
*/
"use strict";var Cubelizr=function(e){function t(){o(),n(),a(),x.display_stats&&r(),x.display_grid&&s(),i(),document.addEventListener("mousemove",E,!1)}function i(){requestAnimationFrame(i),TWEEN.update(),x.mouse_control&&(h.position.x+=.05*(T-h.position.x+200),h.position.y+=.05*(-H-h.position.y+200),h.lookAt(g.position)),y.render(g,h),null!==R&&R.update()}function o(){h=new THREE.OrthographicCamera(v/-2,v/2,M/2,M/-2,-500,5e3),g=new THREE.Scene,h.position.x=200,h.position.y=200,h.position.z=200,h.lookAt(g.position),y=new THREE.WebGLRenderer,y.setClearColor(e.backgroundColor),y.setSize(v,M),m.appendChild(y.domElement)}function n(){b.forEach(function(e){e.tween.start(),g.add(e.getMesh())})}function a(){var e=new THREE.AmbientLight(8);g.add(e);var t=new THREE.DirectionalLight(16777215);t.position.x=1.5,t.position.y=1.5,t.position.z=1.5,t.position.normalize(),g.add(t);var t=new THREE.DirectionalLight(11184810);t.position.x=-5,t.position.y=-5,t.position.z=-5,t.position.normalize(),g.add(t)}function r(){R=new Stats,R.domElement.style.position="absolute",R.domElement.style.top="0px",m.appendChild(R.domElement)}function s(){for(var t=e.gridsize*e.tilesize/2,i=e.tilesize,o=new THREE.Geometry,n=-t;t>=n;n+=i)o.vertices.push(new THREE.Vector3(-t,0,n)),o.vertices.push(new THREE.Vector3(t,0,n)),o.vertices.push(new THREE.Vector3(n,0,-t)),o.vertices.push(new THREE.Vector3(n,0,t));var a=new THREE.LineBasicMaterial({color:0,opacity:.2}),r=new THREE.Line(o,a);r.type=THREE.LinePieces,e.gridsize%2==0&&(r.position.x-=e.tilesize/2,r.position.z-=e.tilesize/2),g.add(r)}function l(e){"undefined"!=typeof e.config&&u(e.config),"undefined"!=typeof e.defaults&&d(e.defaults),"undefined"!=typeof e.textures&&c(e.textures),"undefined"!=typeof e.objects&&p(e.objects)}function u(e){x.mouse_control=1===e.mouse_control?!0:!1,x.display_grid=1===e.display_grid?!0:!1,x.display_stats=1===e.display_stats?!0:!1}function d(e){w.type=e.type?e.type:"cube",w.color=e.color?e.color:"0xff22ff",w.texture=e.texture?e.texture:"",w.opacity=e.opacity?e.opacity:"0xff22ff",w.start=e.start?e.start:.1,w.duration=e.duration?e.duration:2,w.animation=e.animation?e.animation:"Elastic.InOut",w.height=e.height?e.height:100}function c(e){z=e,z&&z.forEach(function(e){e.material=6==e.url.length?[new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[0])}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[1])}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[2])}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[3])}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[4])}),new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[5])})]:new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture(e.url[0])})})}function p(t){t.forEach(function(t){var i=t.type?t.type:w.type,o=t.color?t.color:w.color,n=t.opacity?t.opacity:w.opacity,a=t.start?t.start:w.start,r=t.duration?t.duration:w.duration,s=t.animation?t.animation:w.animation,l=t.x?t.x:0,u=t.y?t.y:0,d=t.z?t.z:0,c=t.height?t.height:w.height,p=t.texture?t.texture:w.texture,E=null;if(""!==p)for(var f=0,m=z.length;m>f;f++)if(z[f].id===p){E=z[f];break}var h=new SceneObject(i,e.tilesize,o,E,n);h.translate(l,u,c),h.animate(c,a,d,r,s),b.push(h)})}function E(e){T=e.clientX-L,H=e.clientY-C}function f(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}var m,h,g,y,T=0,H=0,R=null,x={},z=[],w={},b=[],v=0,M=0,L=0,C=0;this.init=function(){return(m=document.getElementById(e.zone))?(("undefined"==typeof e.tilesize||isNaN(e.tilesize))&&(e.tilesize=50),("undefined"==typeof e.gridsize||isNaN(e.gridsize))&&(e.gridsize=10),M="undefined"!=typeof e.height?e.height:m.clientHeight,v="undefined"!=typeof e.width?e.width:m.clientWidth,L=v/2,C=M/2,"undefined"!=typeof e.backgroundColor&&f(e.backgroundColor)||(e.backgroundColor=m.style.backgroundColor),"undefined"!=typeof e.backgroundColor&&u(e.backgroundColor),l(e.scene),void t()):void console.log("Cubelizr: please configure a zone (selector) for place the canvas.")}()};
"use strict";var SceneObject=function(n,t,a,i,u){function e(n){switch(n){case"Linear.None":return TWEEN.Easing.Linear.None;case"Quadratic.In":return TWEEN.Easing.Quadratic.In;case"Quadratic.Out":return TWEEN.Easing.Quadratic.Out;case"Quadratic.InOut":return TWEEN.Easing.Quadratic.InOut;case"Cubic.In":return TWEEN.Easing.Cubic.In;case"Cubic.Out":return TWEEN.Easing.Cubic.Out;case"Cubic.InOut":return TWEEN.Easing.Cubic.InOut;case"Quartic.In":return TWEEN.Easing.Quartic.In;case"Quartic.Out":return TWEEN.Easing.Quartic.Out;case"Quartic.InOut":return TWEEN.Easing.Quartic.InOut;case"Quintic.In":return TWEEN.Easing.Quintic.In;case"Quintic.Out":return TWEEN.Easing.Quintic.Out;case"Quintic.InOut":return TWEEN.Easing.Quintic.InOut;case"Sinusoidal.In":return TWEEN.Easing.Sinusoidal.In;case"Sinusoidal.Out":return TWEEN.Easing.Sinusoidal.Out;case"Sinusoidal.InOut":return TWEEN.Easing.Sinusoidal.InOut;case"Exponential.In":return TWEEN.Easing.Exponential.In;case"Exponential.Out":return TWEEN.Easing.Exponential.Out;case"Exponential.InOut":return TWEEN.Easing.Exponential.InOut;case"Circular.In":return TWEEN.Easing.Circular.In;case"Circular.Out":return TWEEN.Easing.Circular.Out;case"Circular.InOut":return TWEEN.Easing.Circular.InOut;case"Elastic.In":return TWEEN.Easing.Elastic.In;case"Elastic.Out":return TWEEN.Easing.Elastic.Out;case"Elastic.InOut":return TWEEN.Easing.Elastic.InOut;case"Back.In":return TWEEN.Easing.Back.In;case"Back.Out":return TWEEN.Easing.Back.Out;case"Back.InOut":return TWEEN.Easing.Back.InOut;case"Bounce.In":return TWEEN.Easing.Bounce.In;case"Bounce.Out":return TWEEN.Easing.Bounce.Out;case"Bounce.InOut":return TWEEN.Easing.Bounce.InOut;default:return TWEEN.Easing.Linear.None}}var E,r,c=null,s=t;this.init=function(){switch(n){case"cube":default:E=new THREE.BoxGeometry(s,s,s)}null!==i&&(c=6==i.url.length?new THREE.MeshFaceMaterial(i.material):i.material),null===c&&(c=new THREE.MeshBasicMaterial({color:a,opacity:u,side:THREE.DoubleSide,wireframe:!1})),r=new THREE.Mesh(E,c)}(),this.getMesh=function(){return r},this.translate=function(n,t,a){r.position.x=s*n-4*s,r.position.y=a,r.position.z=s*t-4*s},this.animate=function(n,t,a,i,u){var E={y:n},c={y:a*s+s/2},o=new TWEEN.Tween(E).to(c,1e3*i);o.delay(100*t),o.easing(e(u)),o.onUpdate(function(){r.position.y=E.y}),this.tween=o}};